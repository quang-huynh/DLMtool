<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 26 Developing Custom Management Procedures | Data-Limited Methods Toolkit (DLMtool 5.4.0)</title>
  <meta name="description" content="User guide for the DLMtool R package" />
  <meta name="generator" content="bookdown 0.13 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 26 Developing Custom Management Procedures | Data-Limited Methods Toolkit (DLMtool 5.4.0)" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://dlmtool.github.io/DLMtool/userguide/introduction.html" />
  
  <meta property="og:description" content="User guide for the DLMtool R package" />
  <meta name="github-repo" content="DLMtool/DLMtool" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 26 Developing Custom Management Procedures | Data-Limited Methods Toolkit (DLMtool 5.4.0)" />
  
  <meta name="twitter:description" content="User guide for the DLMtool R package" />
  

<meta name="author" content="Tom Carruthers &amp; Adrian Hordyk" />


<meta name="date" content="2019-09-19" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  <link rel="shortcut icon" href="favicon-16x16.png" type="image/x-icon" />
<link rel="prev" href="customizing-the-operating-model.html"/>
<link rel="next" href="custom-parameters.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./introduction.html">DLMtool User Guide</a></li>

<li class="divider"></li>
<li class="part"><span><b>Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#data-limited-methods-toolkit"><i class="fa fa-check"></i><b>1.1</b> Data-Limited Methods Toolkit</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#management-strategy-evaluation"><i class="fa fa-check"></i><b>1.2</b> Management Strategy Evaluation</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#how-does-management-strategy-evaluation-differ-from-stock-assessment"><i class="fa fa-check"></i><b>1.3</b> How does Management Strategy Evaluation Differ from Stock Assessment?</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#assumed-knowledge"><i class="fa fa-check"></i><b>1.4</b> Assumed Knowledge</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#the-user-manual"><i class="fa fa-check"></i><b>1.5</b> The User Manual</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#dlmtool-bug-reports"><i class="fa fa-check"></i><b>1.6</b> DLMtool Bug Reports</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#version-notes"><i class="fa fa-check"></i><b>1.7</b> Version Notes</a></li>
</ul></li>
<li class="part"><span><b>Getting Started with DLMtool</b></span></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#required-software"><i class="fa fa-check"></i><b>2.1</b> Required Software</a><ul>
<li class="chapter" data-level="2.1.1" data-path="getting-started.html"><a href="getting-started.html#the-r-software"><i class="fa fa-check"></i><b>2.1.1</b> The R Software</a></li>
<li class="chapter" data-level="2.1.2" data-path="getting-started.html"><a href="getting-started.html#rstudio"><i class="fa fa-check"></i><b>2.1.2</b> RStudio</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool"><i class="fa fa-check"></i><b>2.2</b> Installing DLMtool</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool-using-r-console"><i class="fa fa-check"></i><b>2.2.1</b> Installing DLMtool using R Console</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-started.html"><a href="getting-started.html#installing-dlmtool-in-rstudio"><i class="fa fa-check"></i><b>2.2.2</b> Installing DLMtool in RStudio</a></li>
<li class="chapter" data-level="2.2.3" data-path="getting-started.html"><a href="getting-started.html#updating-the-dlmtool-package"><i class="fa fa-check"></i><b>2.2.3</b> Updating the DLMtool Package</a></li>
<li class="chapter" data-level="2.2.4" data-path="getting-started.html"><a href="getting-started.html#checking-dlmtool-version"><i class="fa fa-check"></i><b>2.2.4</b> Checking DLMtool version</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="getting-started.html"><a href="getting-started.html#loading-dlmtool"><i class="fa fa-check"></i><b>2.3</b> Loading DLMtool</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="a-very-quick-demo.html"><a href="a-very-quick-demo.html"><i class="fa fa-check"></i><b>3</b> A Very Quick Demo</a></li>
<li class="chapter" data-level="4" data-path="the-operating-model.html"><a href="the-operating-model.html"><i class="fa fa-check"></i><b>4</b> The Operating Model</a><ul>
<li class="chapter" data-level="4.1" data-path="the-operating-model.html"><a href="the-operating-model.html#om-components"><i class="fa fa-check"></i><b>4.1</b> OM Components</a><ul>
<li class="chapter" data-level="4.1.1" data-path="the-operating-model.html"><a href="the-operating-model.html#stock-object"><i class="fa fa-check"></i><b>4.1.1</b> Stock Object</a></li>
<li class="chapter" data-level="4.1.2" data-path="the-operating-model.html"><a href="the-operating-model.html#fleet-object"><i class="fa fa-check"></i><b>4.1.2</b> Fleet Object</a></li>
<li class="chapter" data-level="4.1.3" data-path="the-operating-model.html"><a href="the-operating-model.html#obs-object"><i class="fa fa-check"></i><b>4.1.3</b> Obs Object</a></li>
<li class="chapter" data-level="4.1.4" data-path="the-operating-model.html"><a href="the-operating-model.html#imp-object"><i class="fa fa-check"></i><b>4.1.4</b> Imp Object</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="the-operating-model.html"><a href="the-operating-model.html#plotting-om-components"><i class="fa fa-check"></i><b>4.2</b> Plotting OM Components</a></li>
<li class="chapter" data-level="4.3" data-path="the-operating-model.html"><a href="the-operating-model.html#building-an-om-from-component-objects"><i class="fa fa-check"></i><b>4.3</b> Building an OM from Component Objects</a></li>
<li class="chapter" data-level="4.4" data-path="the-operating-model.html"><a href="the-operating-model.html#visualizing-an-om"><i class="fa fa-check"></i><b>4.4</b> Visualizing an OM</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="management-procedures.html"><a href="management-procedures.html"><i class="fa fa-check"></i><b>5</b> Management Procedures</a><ul>
<li class="chapter" data-level="5.1" data-path="management-procedures.html"><a href="management-procedures.html#what-is-a-management-procedure"><i class="fa fa-check"></i><b>5.1</b> What is a Management Procedure?</a></li>
<li class="chapter" data-level="5.2" data-path="management-procedures.html"><a href="management-procedures.html#available-management-procedures"><i class="fa fa-check"></i><b>5.2</b> Available Management Procedures</a></li>
<li class="chapter" data-level="5.3" data-path="management-procedures.html"><a href="management-procedures.html#types-of-management-procedure"><i class="fa fa-check"></i><b>5.3</b> Types of Management Procedure</a><ul>
<li class="chapter" data-level="5.3.1" data-path="management-procedures.html"><a href="management-procedures.html#input-control-mps"><i class="fa fa-check"></i><b>5.3.1</b> Input Control MPs</a></li>
<li class="chapter" data-level="5.3.2" data-path="management-procedures.html"><a href="management-procedures.html#output-control-mps"><i class="fa fa-check"></i><b>5.3.2</b> Output Control MPs</a></li>
<li class="chapter" data-level="5.3.3" data-path="management-procedures.html"><a href="management-procedures.html#mixed-mps"><i class="fa fa-check"></i><b>5.3.3</b> Mixed MPs</a></li>
<li class="chapter" data-level="5.3.4" data-path="management-procedures.html"><a href="management-procedures.html#reference-mps"><i class="fa fa-check"></i><b>5.3.4</b> Reference MPs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="running-the-mse.html"><a href="running-the-mse.html"><i class="fa fa-check"></i><b>6</b> Running the MSE</a><ul>
<li class="chapter" data-level="6.1" data-path="running-the-mse.html"><a href="running-the-mse.html#specify-an-operating-model"><i class="fa fa-check"></i><b>6.1</b> Specify an Operating Model</a></li>
<li class="chapter" data-level="6.2" data-path="running-the-mse.html"><a href="running-the-mse.html#choose-the-management-procedures"><i class="fa fa-check"></i><b>6.2</b> Choose the Management Procedures</a></li>
<li class="chapter" data-level="6.3" data-path="running-the-mse.html"><a href="running-the-mse.html#run-the-mse"><i class="fa fa-check"></i><b>6.3</b> Run the MSE</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="checking-convergence.html"><a href="checking-convergence.html"><i class="fa fa-check"></i><b>7</b> Checking Convergence</a></li>
<li class="chapter" data-level="8" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html"><i class="fa fa-check"></i><b>8</b> Examining the MSE Results</a><ul>
<li class="chapter" data-level="8.1" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#introducing-performance-metrics"><i class="fa fa-check"></i><b>8.1</b> Introducing Performance Metrics</a></li>
<li class="chapter" data-level="8.2" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#summary-table"><i class="fa fa-check"></i><b>8.2</b> Summary Table</a></li>
<li class="chapter" data-level="8.3" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#plotting-mse-results"><i class="fa fa-check"></i><b>8.3</b> Plotting MSE Results</a><ul>
<li class="chapter" data-level="8.3.1" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#trade-off-plots"><i class="fa fa-check"></i><b>8.3.1</b> Trade-Off Plots</a></li>
<li class="chapter" data-level="8.3.2" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#wormplot"><i class="fa fa-check"></i><b>8.3.2</b> Wormplot</a></li>
<li class="chapter" data-level="8.3.3" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#projection-plots"><i class="fa fa-check"></i><b>8.3.3</b> Projection Plots</a></li>
<li class="chapter" data-level="8.3.4" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#kobe-plots"><i class="fa fa-check"></i><b>8.3.4</b> Kobe Plots</a></li>
<li class="chapter" data-level="8.3.5" data-path="examining-the-mse-results.html"><a href="examining-the-mse-results.html#compare-to-current-conditions"><i class="fa fa-check"></i><b>8.3.5</b> Compare to Current Conditions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="parallel-processing.html"><a href="parallel-processing.html"><i class="fa fa-check"></i><b>9</b> Parallel Processing</a><ul>
<li class="chapter" data-level="9.1" data-path="parallel-processing.html"><a href="parallel-processing.html#setting-up-parallel-processing"><i class="fa fa-check"></i><b>9.1</b> Setting up Parallel Processing</a></li>
<li class="chapter" data-level="9.2" data-path="parallel-processing.html"><a href="parallel-processing.html#running-mse-with-parallel-processing"><i class="fa fa-check"></i><b>9.2</b> Running MSE with Parallel Processing</a></li>
<li class="chapter" data-level="9.3" data-path="parallel-processing.html"><a href="parallel-processing.html#determining-optimal-number-of-processors"><i class="fa fa-check"></i><b>9.3</b> Determining Optimal Number of Processors</a></li>
</ul></li>
<li class="part"><span><b>Creating an Operating Model</b></span></li>
<li class="chapter" data-level="10" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html"><i class="fa fa-check"></i><b>10</b> Creating a New Operating Model</a><ul>
<li class="chapter" data-level="10.1" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#an-example-workflow"><i class="fa fa-check"></i><b>10.1</b> An Example WorkFlow</a></li>
<li class="chapter" data-level="10.2" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#create-a-new-project"><i class="fa fa-check"></i><b>10.2</b> Create a New Project</a></li>
<li class="chapter" data-level="10.3" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#initialize-a-new-om"><i class="fa fa-check"></i><b>10.3</b> Initialize a New OM</a><ul>
<li class="chapter" data-level="10.3.1" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#using-templates"><i class="fa fa-check"></i><b>10.3.1</b> Using Templates</a></li>
<li class="chapter" data-level="10.3.2" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#an-example"><i class="fa fa-check"></i><b>10.3.2</b> An Example</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#populate-and-document-om"><i class="fa fa-check"></i><b>10.4</b> Populate and Document OM</a></li>
<li class="chapter" data-level="10.5" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#compile-the-om-report"><i class="fa fa-check"></i><b>10.5</b> Compile the OM Report</a></li>
<li class="chapter" data-level="10.6" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#import-the-om-into-r"><i class="fa fa-check"></i><b>10.6</b> Import the OM into R</a></li>
<li class="chapter" data-level="10.7" data-path="creating-a-new-operating-model.html"><a href="creating-a-new-operating-model.html#documenting-an-existing-om"><i class="fa fa-check"></i><b>10.7</b> Documenting an Existing OM</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html"><i class="fa fa-check"></i><b>11</b> Generating Correlated Life-History Parameters</a><ul>
<li class="chapter" data-level="11.1" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#predicting-all-life-history-parameters"><i class="fa fa-check"></i><b>11.1</b> Predicting all life-history parameters</a></li>
<li class="chapter" data-level="11.2" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#predicting-some-life-history-parameters"><i class="fa fa-check"></i><b>11.2</b> Predicting some life-history parameters</a></li>
<li class="chapter" data-level="11.3" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#predicting-correlated-parameters"><i class="fa fa-check"></i><b>11.3</b> Predicting correlated parameters</a></li>
<li class="chapter" data-level="11.4" data-path="generating-correlated-life-history-parameters.html"><a href="generating-correlated-life-history-parameters.html#introducing-custom-parameters"><i class="fa fa-check"></i><b>11.4</b> Introducing Custom Parameters</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="modifying-the-om.html"><a href="modifying-the-om.html"><i class="fa fa-check"></i><b>12</b> Modifying the OM</a><ul>
<li class="chapter" data-level="12.1" data-path="modifying-the-om.html"><a href="modifying-the-om.html#the-tinyerr-function"><i class="fa fa-check"></i><b>12.1</b> The <code>tinyErr</code> function</a></li>
<li class="chapter" data-level="12.2" data-path="modifying-the-om.html"><a href="modifying-the-om.html#the-replace-function"><i class="fa fa-check"></i><b>12.2</b> The <code>Replace</code> function</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="operating-model-library.html"><a href="operating-model-library.html"><i class="fa fa-check"></i><b>13</b> Operating Model Library</a></li>
<li class="part"><span><b>Interpreting MSE Results</b></span></li>
<li class="chapter" data-level="14" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html"><i class="fa fa-check"></i><b>14</b> Examining the MSE object</a><ul>
<li class="chapter" data-level="14.1" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-first-six-slots"><i class="fa fa-check"></i><b>14.1</b> The First Six Slots</a></li>
<li class="chapter" data-level="14.2" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-om-slot"><i class="fa fa-check"></i><b>14.2</b> The <code>OM</code> Slot</a></li>
<li class="chapter" data-level="14.3" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-obs-slot"><i class="fa fa-check"></i><b>14.3</b> The <code>Obs</code> Slot</a></li>
<li class="chapter" data-level="14.4" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-b_bmsy-and-f_fmsy-slots"><i class="fa fa-check"></i><b>14.4</b> The <code>B_BMSY</code> and <code>F_FMSY</code> Slots</a></li>
<li class="chapter" data-level="14.5" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-b-fm-c-and-tac-slots"><i class="fa fa-check"></i><b>14.5</b> The <code>B</code>, <code>FM</code>, <code>C</code> and <code>TAC</code> Slots</a></li>
<li class="chapter" data-level="14.6" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-ssb_hist-cb_hist-and-fm_hist-slots"><i class="fa fa-check"></i><b>14.6</b> The <code>SSB_hist</code>, <code>CB_hist</code>, and <code>FM_hist</code> Slots</a></li>
<li class="chapter" data-level="14.7" data-path="examining-the-mse-object.html"><a href="examining-the-mse-object.html#the-effort-slot"><i class="fa fa-check"></i><b>14.7</b> The <code>Effort</code> Slot</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="performance-metrics.html"><a href="performance-metrics.html"><i class="fa fa-check"></i><b>15</b> Performance Metrics</a><ul>
<li class="chapter" data-level="15.1" data-path="performance-metrics.html"><a href="performance-metrics.html#the-need-for-performance-metrics"><i class="fa fa-check"></i><b>15.1</b> The Need for Performance Metrics</a></li>
<li class="chapter" data-level="15.2" data-path="performance-metrics.html"><a href="performance-metrics.html#inevitable-trade-offs"><i class="fa fa-check"></i><b>15.2</b> Inevitable Trade-Offs</a><ul>
<li class="chapter" data-level="15.2.1" data-path="performance-metrics.html"><a href="performance-metrics.html#operational-management-objectives"><i class="fa fa-check"></i><b>15.2.1</b> Operational Management Objectives</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="performance-metrics.html"><a href="performance-metrics.html#commonly-used-performance-metrics"><i class="fa fa-check"></i><b>15.3</b> Commonly used Performance Metrics</a><ul>
<li class="chapter" data-level="15.3.1" data-path="performance-metrics.html"><a href="performance-metrics.html#fishing-mortality"><i class="fa fa-check"></i><b>15.3.1</b> Fishing Mortality</a></li>
<li class="chapter" data-level="15.3.2" data-path="performance-metrics.html"><a href="performance-metrics.html#stock-biomass"><i class="fa fa-check"></i><b>15.3.2</b> Stock Biomass</a></li>
<li class="chapter" data-level="15.3.3" data-path="performance-metrics.html"><a href="performance-metrics.html#additional-performance-metrics"><i class="fa fa-check"></i><b>15.3.3</b> Additional Performance Metrics</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="performance-metrics.html"><a href="performance-metrics.html#performance-metrics-methods"><i class="fa fa-check"></i><b>15.4</b> Performance Metrics Methods</a><ul>
<li class="chapter" data-level="15.4.1" data-path="performance-metrics.html"><a href="performance-metrics.html#overview-of-the-pm-functions"><i class="fa fa-check"></i><b>15.4.1</b> Overview of the <code>PM</code> Functions</a></li>
<li class="chapter" data-level="15.4.2" data-path="performance-metrics.html"><a href="performance-metrics.html#customizing-the-pm-functions"><i class="fa fa-check"></i><b>15.4.2</b> Customizing the <code>PM</code> Functions</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="performance-metrics.html"><a href="performance-metrics.html#summarizing-management-procedure-performance"><i class="fa fa-check"></i><b>15.5</b> Summarizing Management Procedure Performance</a><ul>
<li class="chapter" data-level="15.5.1" data-path="performance-metrics.html"><a href="performance-metrics.html#summary-table-1"><i class="fa fa-check"></i><b>15.5.1</b> <code>summary</code> Table</a></li>
<li class="chapter" data-level="15.5.2" data-path="performance-metrics.html"><a href="performance-metrics.html#trade-off-plots-1"><i class="fa fa-check"></i><b>15.5.2</b> Trade-Off Plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="value-of-information.html"><a href="value-of-information.html"><i class="fa fa-check"></i><b>16</b> Value of Information</a></li>
<li class="part"><span><b>Using Fishery Data</b></span></li>
<li class="chapter" data-level="17" data-path="the-fishery-data-object.html"><a href="the-fishery-data-object.html"><i class="fa fa-check"></i><b>17</b> The Fishery Data Object</a><ul>
<li class="chapter" data-level="17.1" data-path="the-fishery-data-object.html"><a href="the-fishery-data-object.html#in-the-mse"><i class="fa fa-check"></i><b>17.1</b> In the MSE</a></li>
<li class="chapter" data-level="17.2" data-path="the-fishery-data-object.html"><a href="the-fishery-data-object.html#application-of-management-procedures-using-real-fisheries-data"><i class="fa fa-check"></i><b>17.2</b> Application of Management Procedures Using Real Fisheries Data</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="example-data-objects.html"><a href="example-data-objects.html"><i class="fa fa-check"></i><b>18</b> Example Data Objects</a></li>
<li class="chapter" data-level="19" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html"><i class="fa fa-check"></i><b>19</b> Creating Your Own Data Object</a><ul>
<li class="chapter" data-level="19.1" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#creating-a-data-file-in-excel"><i class="fa fa-check"></i><b>19.1</b> Creating a Data File in Excel</a></li>
<li class="chapter" data-level="19.2" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#importing-the-data-object"><i class="fa fa-check"></i><b>19.2</b> Importing the Data object</a></li>
<li class="chapter" data-level="19.3" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#example-fishery-data-files"><i class="fa fa-check"></i><b>19.3</b> Example Fishery Data Files</a></li>
<li class="chapter" data-level="19.4" data-path="creating-your-own-data-object.html"><a href="creating-your-own-data-object.html#populating-a-data-object-in-r"><i class="fa fa-check"></i><b>19.4</b> Populating a Data Object in R</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="plotting-data-objects.html"><a href="plotting-data-objects.html"><i class="fa fa-check"></i><b>20</b> Plotting Data Objects</a></li>
<li class="chapter" data-level="21" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html"><i class="fa fa-check"></i><b>21</b> Determining Feasible and Available Management Procedures</a><ul>
<li class="chapter" data-level="21.1" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html#feasible-mps"><i class="fa fa-check"></i><b>21.1</b> Feasible MPs</a></li>
<li class="chapter" data-level="21.2" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html#available-mps"><i class="fa fa-check"></i><b>21.2</b> Available MPs</a></li>
<li class="chapter" data-level="21.3" data-path="determining-feasible-and-available-management-procedures.html"><a href="determining-feasible-and-available-management-procedures.html#unavailable-mps"><i class="fa fa-check"></i><b>21.3</b> Unavailable MPs</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="applying-management-procedures.html"><a href="applying-management-procedures.html"><i class="fa fa-check"></i><b>22</b> Applying Management Procedures</a></li>
<li class="part"><span><b>Advanced DLMtool</b></span></li>
<li class="chapter" data-level="23" data-path="averaging-mps.html"><a href="averaging-mps.html"><i class="fa fa-check"></i><b>23</b> Averaging MPs</a></li>
<li class="chapter" data-level="24" data-path="evaluating-om.html"><a href="evaluating-om.html"><i class="fa fa-check"></i><b>24</b> Evaluating OM</a></li>
<li class="chapter" data-level="25" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html"><i class="fa fa-check"></i><b>25</b> Customizing the Operating Model</a><ul>
<li class="chapter" data-level="25.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#accounting-for-historical-changes-in-fishing"><i class="fa fa-check"></i><b>25.1</b> Accounting for Historical Changes in Fishing</a><ul>
<li class="chapter" data-level="25.1.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#historical-trends-in-fishing-mortality"><i class="fa fa-check"></i><b>25.1.1</b> Historical Trends in Fishing Mortality</a></li>
<li class="chapter" data-level="25.1.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#historical-trends-in-selectivity-pattern"><i class="fa fa-check"></i><b>25.1.2</b> Historical Trends in Selectivity Pattern</a></li>
<li class="chapter" data-level="25.1.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#including-existing-mpas"><i class="fa fa-check"></i><b>25.1.3</b> Including Existing MPAs</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#size-specific-natural-mortality"><i class="fa fa-check"></i><b>25.2</b> Size-Specific Natural Mortality</a><ul>
<li class="chapter" data-level="25.2.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#constant-m-at-agesize"><i class="fa fa-check"></i><b>25.2.1</b> Constant M at age/size</a></li>
<li class="chapter" data-level="25.2.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#lorenzen-function-of-weight"><i class="fa fa-check"></i><b>25.2.2</b> Lorenzen function of weight</a></li>
<li class="chapter" data-level="25.2.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#map-age-specific-m"><i class="fa fa-check"></i><b>25.2.3</b> Map Age-Specific M</a></li>
<li class="chapter" data-level="25.2.4" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#map-length-specific-m"><i class="fa fa-check"></i><b>25.2.4</b> Map Length-Specific M</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#selection-retention-and-discard-mortality"><i class="fa fa-check"></i><b>25.3</b> Selection, Retention and Discard Mortality</a><ul>
<li class="chapter" data-level="25.3.1" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#fishery-selection-curve"><i class="fa fa-check"></i><b>25.3.1</b> Fishery Selection Curve</a></li>
<li class="chapter" data-level="25.3.2" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#fishery-retention-curve"><i class="fa fa-check"></i><b>25.3.2</b> Fishery Retention Curve</a></li>
<li class="chapter" data-level="25.3.3" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#discard-mortality"><i class="fa fa-check"></i><b>25.3.3</b> Discard Mortality</a></li>
<li class="chapter" data-level="25.3.4" data-path="customizing-the-operating-model.html"><a href="customizing-the-operating-model.html#general-discarding"><i class="fa fa-check"></i><b>25.3.4</b> General Discarding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html"><i class="fa fa-check"></i><b>26</b> Developing Custom Management Procedures</a><ul>
<li class="chapter" data-level="26.1" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#the-anatomy-of-an-mp"><i class="fa fa-check"></i><b>26.1</b> The Anatomy of an MP</a></li>
<li class="chapter" data-level="26.2" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#a-constant-catch-mp"><i class="fa fa-check"></i><b>26.2</b> A Constant Catch MP</a></li>
<li class="chapter" data-level="26.3" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#a-more-complex-mp"><i class="fa fa-check"></i><b>26.3</b> A More Complex MP</a></li>
<li class="chapter" data-level="26.4" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#beyond-the-catch-limit"><i class="fa fa-check"></i><b>26.4</b> Beyond the Catch Limit</a><ul>
<li class="chapter" data-level="26.4.1" data-path="developing-custom-management-procedures.html"><a href="developing-custom-management-procedures.html#an-example-effort-control"><i class="fa fa-check"></i><b>26.4.1</b> An Example Effort Control</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="custom-parameters.html"><a href="custom-parameters.html"><i class="fa fa-check"></i><b>27</b> Custom Parameters</a><ul>
<li class="chapter" data-level="27.1" data-path="custom-parameters.html"><a href="custom-parameters.html#valid-cpars-names"><i class="fa fa-check"></i><b>27.1</b> Valid cpars names</a></li>
<li class="chapter" data-level="27.2" data-path="custom-parameters.html"><a href="custom-parameters.html#correlated-samples"><i class="fa fa-check"></i><b>27.2</b> Correlated samples</a></li>
<li class="chapter" data-level="27.3" data-path="custom-parameters.html"><a href="custom-parameters.html#custom-internal-parameters"><i class="fa fa-check"></i><b>27.3</b> Custom internal parameters</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html"><i class="fa fa-check"></i><b>28</b> Subsetting the MSE Object</a><ul>
<li class="chapter" data-level="28.1" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html#subsetting-by-performance"><i class="fa fa-check"></i><b>28.1</b> Subsetting by Performance</a></li>
<li class="chapter" data-level="28.2" data-path="subsetting-the-mse-object.html"><a href="subsetting-the-mse-object.html#subsetting-by-operating-model-parameters"><i class="fa fa-check"></i><b>28.2</b> Subsetting by Operating Model Parameters</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html"><i class="fa fa-check"></i><b>29</b> Custom Performance Metrics</a><ul>
<li class="chapter" data-level="29.1" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#necessity-of-complexity"><i class="fa fa-check"></i><b>29.1</b> Necessity of Complexity</a></li>
<li class="chapter" data-level="29.2" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#pm-methods-in-detail"><i class="fa fa-check"></i><b>29.2</b> <code>PM</code> Methods in Detail</a></li>
<li class="chapter" data-level="29.3" data-path="custom-performance-metrics.html"><a href="custom-performance-metrics.html#creating-example-pms-and-plot"><i class="fa fa-check"></i><b>29.3</b> Creating Example <code>PMs</code> and Plot</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i><b>A</b> Acknowledgements</a></li>
<li class="chapter" data-level="B" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>B</b> References</a></li>
<li class="chapter" data-level="C" data-path="getting-help.html"><a href="getting-help.html"><i class="fa fa-check"></i><b>C</b> Getting Help</a><ul>
<li class="chapter" data-level="C.1" data-path="getting-help.html"><a href="getting-help.html#first-time-working-with-r"><i class="fa fa-check"></i><b>C.1</b> First Time Working With R?</a><ul>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#the-r-software-1"><i class="fa fa-check"></i>The R Software</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#rstudio-1"><i class="fa fa-check"></i>RStudio</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="getting-help.html"><a href="getting-help.html#loadDLM"><i class="fa fa-check"></i><b>C.2</b> Installing the DLMtool Package</a><ul>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#installing-dlmtool-using-r-console-1"><i class="fa fa-check"></i>Installing DLMtool Using R Console</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#installing-dlmtool-using-rstudio"><i class="fa fa-check"></i>Installing DLMtool Using RStudio</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#updating-the-dlmtool-package-1"><i class="fa fa-check"></i>Updating the DLMtool Package</a></li>
<li class="chapter" data-level="" data-path="getting-help.html"><a href="getting-help.html#loading-the-dlmtool-package"><i class="fa fa-check"></i>Loading the DLMtool Package</a></li>
</ul></li>
<li class="chapter" data-level="C.3" data-path="getting-help.html"><a href="getting-help.html#a-brief-note-on-s4-methods"><i class="fa fa-check"></i><b>C.3</b> A Brief Note on S4 Methods</a></li>
<li class="chapter" data-level="C.4" data-path="getting-help.html"><a href="getting-help.html#additional-help-on-the-dlmtool"><i class="fa fa-check"></i><b>C.4</b> Additional Help on the DLMtool</a></li>
<li class="chapter" data-level="C.5" data-path="getting-help.html"><a href="getting-help.html#questions-on-r-related-problems"><i class="fa fa-check"></i><b>C.5</b> Questions on R-related Problems</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html"><i class="fa fa-check"></i><b>D</b> Assumptions of DLMtool</a><ul>
<li class="chapter" data-level="D.1" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#biology"><i class="fa fa-check"></i><b>D.1</b> Biology</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#short-lived-species"><i class="fa fa-check"></i>Short-Lived Species</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#density-dependent-compensation"><i class="fa fa-check"></i>Density-Dependent Compensation</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#von-bertalanffy-growth"><i class="fa fa-check"></i>von Bertalanffy Growth</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#natural-mortality-rate-at-age"><i class="fa fa-check"></i>Natural Mortality Rate at Age</a></li>
</ul></li>
<li class="chapter" data-level="D.2" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#mse-model-assumptions"><i class="fa fa-check"></i><b>D.2</b> MSE Model Assumptions</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#retention-and-selectivity"><i class="fa fa-check"></i>Retention and Selectivity</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#non-convergence-of-management-procedure"><i class="fa fa-check"></i>Non-Convergence of Management Procedure</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#idealised-observation-models-for-catch-composition-data"><i class="fa fa-check"></i>Idealised Observation Models for Catch Composition Data</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#two-box-model"><i class="fa fa-check"></i>Two-Box Model</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#ontogenetic-habitat-shifts"><i class="fa fa-check"></i>Ontogenetic Habitat Shifts</a></li>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#closed-system"><i class="fa fa-check"></i>Closed System</a></li>
</ul></li>
<li class="chapter" data-level="D.3" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#management-procedures-1"><i class="fa fa-check"></i><b>D.3</b> Management Procedures</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#harvest-control-rules-must-be-integrated-into-data-limited-mps"><i class="fa fa-check"></i>Harvest Control Rules Must be Integrated into Data-Limited MPs</a></li>
</ul></li>
<li class="chapter" data-level="D.4" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#data-and-method-application"><i class="fa fa-check"></i><b>D.4</b> Data and Method Application</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#data-assumed-to-be-representative"><i class="fa fa-check"></i>Data Assumed to be Representative</a></li>
</ul></li>
<li class="chapter" data-level="D.5" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#calculating-reference-points"><i class="fa fa-check"></i><b>D.5</b> Calculating Reference Points</a><ul>
<li class="chapter" data-level="" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#depletion-and-unfished-reference-points"><i class="fa fa-check"></i>Depletion and Unfished Reference Points</a></li>
<li class="chapter" data-level="D.5.1" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#initial-depletion"><i class="fa fa-check"></i><b>D.5.1</b> Initial Depletion</a></li>
<li class="chapter" data-level="D.5.2" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#msy-reference-points"><i class="fa fa-check"></i><b>D.5.2</b> MSY Reference Points</a></li>
<li class="chapter" data-level="D.5.3" data-path="assumptions-of-dlmtool.html"><a href="assumptions-of-dlmtool.html#setting-depletion-at-a-fraction-of-bmsy"><i class="fa fa-check"></i><b>D.5.3</b> Setting Depletion at a fraction of BMSY</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="E" data-path="changes.html"><a href="changes.html"><i class="fa fa-check"></i><b>E</b> Changes</a><ul>
<li class="chapter" data-level="" data-path="changes.html"><a href="changes.html#important-changes---dlmtool-v4.1-and-greater"><i class="fa fa-check"></i>Important changes - DLMtool V4.1 and greater</a></li>
<li class="chapter" data-level="" data-path="changes.html"><a href="changes.html#important-changes---dlmtool-v4.5-and-greater"><i class="fa fa-check"></i>Important changes - DLMtool V4.5 and greater</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="http://www.datalimitedtoolkit.com" target="blank">DLMtool Website</a></li>
<li><a href="../index.html">DLMtool Documentation</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data-Limited Methods Toolkit (DLMtool 5.4.0)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="developing-custom-management-procedures" class="section level1">
<h1><span class="header-section-number">Chapter 26</span> Developing Custom Management Procedures</h1>
<p>DLMtool was designed to be extensible in order to promote the development of new Management Procedures. In this chapter we design a series of new Management Procedures that include spatial controls and input controls in the form of size limit restrictions.</p>
<p>If you wish, you can also add your newly developed MPs to the DLMtool package so they are accessible to other uses. Of course you will be credited as the author. Please <a href="http://www.datalimitedtoolkit.org/contact">contact us</a> for details how to do this.</p>
<p>As we saw before, real data are stored in a class of objects <code>Data</code>.</p>
<p>The DLMtool MSE function generates simulated data and puts it in exactly the same format as real data. This is highly desirable because
it means that the same MP code that is tested in the MSE can then be used to make management recommendations.</p>
<p>If an MP is coded incorrectly it may catastrophically fail MSE testing and will therefore be excluded from use in management.</p>
<div id="the-anatomy-of-an-mp" class="section level2">
<h2><span class="header-section-number">26.1</span> The Anatomy of an MP</h2>
<p>Let’s examine an existing output MP to identify the MP data requirements.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb468-1" title="1"><span class="kw">avail</span>(<span class="st">&#39;Output&#39;</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;AvC&quot;         &quot;BK&quot;          &quot;BK_CC&quot;       &quot;BK_ML&quot;       &quot;CC1&quot;        
##  [6] &quot;CC2&quot;         &quot;CC3&quot;         &quot;CC4&quot;         &quot;CC5&quot;         &quot;CompSRA&quot;    
## [11] &quot;CompSRA4010&quot; &quot;CurC&quot;        &quot;DAAC&quot;        &quot;DBSRA&quot;       &quot;DBSRA_40&quot;   
## [16] &quot;DBSRA4010&quot;   &quot;DCAC&quot;        &quot;DCAC_40&quot;     &quot;DCAC_ML&quot;     &quot;DCAC4010&quot;   
## [21] &quot;DCACs&quot;       &quot;DD&quot;          &quot;DD4010&quot;      &quot;DepF&quot;        &quot;DynF&quot;       
## [26] &quot;Fadapt&quot;      &quot;Fdem&quot;        &quot;Fdem_CC&quot;     &quot;Fdem_ML&quot;     &quot;Fratio&quot;     
## [31] &quot;Fratio_CC&quot;   &quot;Fratio_ML&quot;   &quot;Fratio4010&quot;  &quot;GB_CC&quot;       &quot;GB_slope&quot;   
## [36] &quot;GB_target&quot;   &quot;Gcontrol&quot;    &quot;HDAAC&quot;       &quot;ICI&quot;         &quot;ICI2&quot;       
## [41] &quot;Iratio&quot;      &quot;Islope1&quot;     &quot;Islope2&quot;     &quot;Islope3&quot;     &quot;Islope4&quot;    
## [46] &quot;IT10&quot;        &quot;IT5&quot;         &quot;Itarget1&quot;    &quot;Itarget2&quot;    &quot;Itarget3&quot;   
## [51] &quot;Itarget4&quot;    &quot;ITM&quot;         &quot;L95target&quot;   &quot;Lratio_BHI&quot;  &quot;Lratio_BHI2&quot;
## [56] &quot;Lratio_BHI3&quot; &quot;LstepCC1&quot;    &quot;LstepCC2&quot;    &quot;LstepCC3&quot;    &quot;LstepCC4&quot;   
## [61] &quot;Ltarget1&quot;    &quot;Ltarget2&quot;    &quot;Ltarget3&quot;    &quot;Ltarget4&quot;    &quot;MCD&quot;        
## [66] &quot;MCD4010&quot;     &quot;Rcontrol&quot;    &quot;Rcontrol2&quot;   &quot;SBT1&quot;        &quot;SBT2&quot;       
## [71] &quot;SPmod&quot;       &quot;SPMSY&quot;       &quot;SPslope&quot;     &quot;SPSRA&quot;       &quot;SPSRA_ML&quot;   
## [76] &quot;YPR&quot;         &quot;YPR_CC&quot;      &quot;YPR_ML&quot;      &quot;avgMP&quot;</code></pre>
<p>Since we’ve seen it used as a default MP in lots of the examples above, lets learn more about DCAC</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb470-1" title="1">?DCAC</a></code></pre></div>
<p>We can even see all the code for this MP by simply typing the name of the MP into the console (this is a fantastic advantage of using R - there is complete transparency about package functions):</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb471-1" title="1">DCAC</a></code></pre></div>
<pre><code>## function(x, Data, reps = 100, plot=FALSE) {
##   rundcac &lt;- DCAC_(x, Data, reps, updateD=TRUE)
##   TAC &lt;- TACfilter(rundcac$dcac)
##   
##   if (plot)  DCAC_plot(x, Data, dcac=rundcac$dcac, TAC, Bt_K=rundcac$Bt_K, yrs=1:length(Data@Year))
##   
##   Rec &lt;- new(&quot;Rec&quot;)
##   Rec@TAC &lt;- TAC
##   Rec
## }
## &lt;bytecode: 0x000001b0e8653c30&gt;
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>“Crikey that looks complicated!” might be your first reaction. However this output MP function is easily demystified.</p>
<p>Like all MPs it has four arguments: <code>x</code>, <code>Data</code>, <code>reps</code> and <code>plot</code> (the last argument was added recently and is optional).</p>
<p>The argument <code>x</code> is the position in the Data object. When real data are stored in a Data object, there is only one position - there is only one real data set.</p>
<p>However, in MSE we conduct many simulations and x refers to simulated data from simulation number <code>x</code>. Any single parameters such as natural mortality rate (<code>Mort</code>) are a vector (<code>nsim</code> long). See <code>Data@Mort[x]</code> in the DCAC code. Any time series such as annual catches or relative abundance indices, are a matrix of <code>nsim</code> rows and <code>nyears</code> columns.</p>
<p>A range of objects of class Data are available:</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb473-1" title="1"><span class="kw">avail</span>(<span class="st">&#39;Data&#39;</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;Atlantic_mackerel&quot;  &quot;China_rockfish&quot;     &quot;Cobia&quot;             
##  [4] &quot;Example_datafile&quot;   &quot;Gulf_blue_tilefish&quot; &quot;ourReefFish&quot;       
##  [7] &quot;Red_snapper&quot;        &quot;SimulatedData&quot;      &quot;China_rockfish2&quot;   
## [10] &quot;Data&quot;               &quot;Madeup&quot;             &quot;Recs&quot;</code></pre>
<p>For simplicity lets use a Data object with just two simulations, <code>SimulatedData</code> and rename it <code>Data</code></p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb475-1" title="1">Data &lt;-<span class="st">  </span>SimulatedData</a></code></pre></div>
<p>Since there are only two simulations in this data set (2 positions) we can now see two values of natural mortality rate:</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb476-1" title="1">Data<span class="op">@</span>Mort</a></code></pre></div>
<pre><code>## [1] 0.3178309 0.3055330</code></pre>
<p>And a matrix of catches with two rows:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb478-1" title="1">Data<span class="op">@</span>Cat</a></code></pre></div>
<pre><code>##          [,1]      [,2]     [,3]     [,4]     [,5]     [,6]     [,7]
## [1,] 17.93249  77.94086 188.9142 356.8789 476.9043 251.3876 483.1683
## [2,] 45.11819 272.96765 254.9031 833.6652 660.0164 930.0886 820.9845
##           [,8]      [,9]     [,10]     [,11]    [,12]     [,13]    [,14]
## [1,] 1437.1550  675.0914  597.1793  993.9574 1370.630  983.1828 1109.963
## [2,]  858.5306 2263.8694 1717.7018 1742.2750 1698.691 1032.4159 2287.460
##         [,15]    [,16]    [,17]    [,18]    [,19]    [,20]    [,21]
## [1,] 1378.250 1757.686 1059.046 1623.116 1110.535 1170.769 1573.469
## [2,] 3306.927 2545.953 2140.442 2247.550 2003.491 2424.214 1320.244
##         [,22]    [,23]     [,24]    [,25]    [,26]    [,27]    [,28]
## [1,] 1177.603 1495.526  899.6538 1327.325  855.511 1557.337 1452.049
## [2,] 2908.740 1448.226 1312.5287 1167.325 2160.353 1611.643 2320.037
##          [,29]     [,30]    [,31]     [,32]     [,33]    [,34]    [,35]
## [1,]  525.2323  727.7376 1860.114 1156.2178  669.2713 1128.633 845.7756
## [2,] 1895.7002 1248.7462 1233.820  903.9822 1666.1382 1227.194 963.6662
##         [,36]    [,37]    [,38]    [,39]    [,40]    [,41]     [,42]
## [1,] 2027.297 1536.299 2077.296 1193.401 1682.116 1502.634  804.0391
## [2,] 1614.708 1719.729 1194.298 1312.921 1136.461 1135.720 1214.5330
##         [,43]    [,44]    [,45]    [,46]     [,47]     [,48]    [,49]
## [1,] 1538.469 1321.569 1665.702 1226.550 1280.9438  895.6957 2269.158
## [2,] 2360.975 1141.793 2103.845 1508.142  946.3396 2077.0564 1082.846
##          [,50]
## [1,]  976.7893
## [2,] 1215.4729</code></pre>
<p>We could generate a single TAC recommendation from these data using DCAC by specifying position 1 (for the first simulation) and by setting reps=1 (we want a single DCAC TAC recommendation)</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb480-1" title="1"><span class="kw">DCAC</span>(<span class="dt">x=</span><span class="dv">1</span>,Data,<span class="dt">reps=</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## TAC (median) 
##     840.1807</code></pre>
<p>If we wanted a stochastic estimate of the TAC we could increase the number of reps:</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb482-1" title="1"><span class="kw">hist</span>(<span class="kw">DCAC</span>(<span class="dt">x=</span><span class="dv">1</span>,Data,<span class="dt">reps=</span><span class="dv">1000</span>)<span class="op">@</span>TAC,<span class="dt">xlab=</span><span class="st">&quot;TAC&quot;</span>,<span class="dt">ylab=</span><span class="st">&quot;Freq.&quot;</span>,<span class="dt">col=</span><span class="st">&quot;blue&quot;</span>)</a></code></pre></div>
<p><img src="userguide_files/figure-html/unnamed-chunk-164-1.png" width="672" /></p>
</div>
<div id="a-constant-catch-mp" class="section level2">
<h2><span class="header-section-number">26.2</span> A Constant Catch MP</h2>
<p>We’ve now got a better idea of the anatomy of an MP. It is a function that must accept three arguments (we will ignore <code>plot</code> for now):</p>
<ul>
<li>x: a simulation number</li>
<li>Data: an object of class <code>Data</code></li>
<li>reps: the MP can provide a sample of TACs <code>reps</code> long.</li>
</ul>
<p>Let’s have a go at designing our own custom MP that can work with DLMtool. We’re going to develop an MP that sets the TAC as the ‘3rd highest catch’.</p>
<p>We decide to call our function <code>THC</code></p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb483-1" title="1">THC&lt;-<span class="cf">function</span>(x, Data, reps){</a>
<a class="sourceLine" id="cb483-2" title="2">  </a>
<a class="sourceLine" id="cb483-3" title="3">  <span class="co"># Find the position of third highest catch</span></a>
<a class="sourceLine" id="cb483-4" title="4">  </a>
<a class="sourceLine" id="cb483-5" title="5">  THCpos&lt;-<span class="kw">order</span>(Data<span class="op">@</span>Cat[x,],<span class="dt">decreasing=</span>T)[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb483-6" title="6">  </a>
<a class="sourceLine" id="cb483-7" title="7">  <span class="co"># Make this the mean TAC recommendation</span></a>
<a class="sourceLine" id="cb483-8" title="8">  </a>
<a class="sourceLine" id="cb483-9" title="9">  THCmu&lt;-Data<span class="op">@</span>Cat[x,THCpos]</a>
<a class="sourceLine" id="cb483-10" title="10">  </a>
<a class="sourceLine" id="cb483-11" title="11">  <span class="co"># A sample of the THC is taken according to a fixed CV of 10%</span></a>
<a class="sourceLine" id="cb483-12" title="12">  TACs &lt;-<span class="st"> </span>THCmu <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(reps, <span class="fl">-0.1</span><span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="dv">2</span>, <span class="fl">0.1</span>)) <span class="co"># this is a lognormal distribution</span></a>
<a class="sourceLine" id="cb483-13" title="13"></a>
<a class="sourceLine" id="cb483-14" title="14">  Rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>) <span class="co"># create a &#39;Rec&#39;object</span></a>
<a class="sourceLine" id="cb483-15" title="15">  Rec<span class="op">@</span>TAC &lt;-<span class="st"> </span>TACs <span class="co"># assign the TACs to the TAC slot</span></a>
<a class="sourceLine" id="cb483-16" title="16">  Rec <span class="co"># return the Rec object</span></a>
<a class="sourceLine" id="cb483-17" title="17">}</a></code></pre></div>
<p>To recap that’s just seven lines of code:</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb484-1" title="1">THC&lt;-<span class="cf">function</span>(x, Data, reps){</a>
<a class="sourceLine" id="cb484-2" title="2">  THCpos&lt;-<span class="kw">order</span>(Data<span class="op">@</span>Cat[x,],<span class="dt">decreasing=</span>T)[<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb484-3" title="3">  THCmu&lt;-Data<span class="op">@</span>Cat[x,THCpos]</a>
<a class="sourceLine" id="cb484-4" title="4">  Rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>)</a>
<a class="sourceLine" id="cb484-5" title="5">  Rec<span class="op">@</span>TAC &lt;-<span class="st"> </span>THCmu <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(reps, <span class="fl">-0.1</span><span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="dv">2</span>, <span class="fl">0.1</span>))</a>
<a class="sourceLine" id="cb484-6" title="6">  Rec</a>
<a class="sourceLine" id="cb484-7" title="7">}</a></code></pre></div>
<p>We can quickly test our new MP for the example Data object</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb485-1" title="1"><span class="kw">THC</span>(<span class="dt">x=</span><span class="dv">1</span>,Data,<span class="dt">reps=</span><span class="dv">10</span>)<span class="op">@</span>TAC</a></code></pre></div>
<pre><code>##  [1] 2190.356 2183.969 2127.416 2004.166 2115.241 2094.272 1943.361
##  [8] 2188.873 2091.100 1859.232</code></pre>
<p>Now that we know it works, to make the function compatible with the DLMtool package we have to assign it the class ‘MP’ so that DLMtool recognizes the function as a management procedure</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb487-1" title="1"><span class="kw">class</span>(THC)&lt;-<span class="st">&quot;MP&quot;</span></a></code></pre></div>
<p>If we want to run the MSE in parallel we need to export the newly created function to the cluster:</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb488-1" title="1"><span class="kw">sfExport</span>(<span class="st">&#39;THC&#39;</span>)</a></code></pre></div>
</div>
<div id="a-more-complex-mp" class="section level2">
<h2><span class="header-section-number">26.3</span> A More Complex MP</h2>
<p>The THC MP is simple and frankly not a great performer (depending on depletion, life-history, adherence to TAC recommendations).</p>
<p>Let’s innovate and create a brand new MP that could suit a catch-data-only stock like Indian Ocean Longtail tuna!</p>
<p>It may be possible to choose a single fleet and establish a catch rate that is ‘reasonable’ or ‘fairly productive’ relative to current catch rates. This could be for example, 40% of the
highest catch rate observed for this fleet or, for example, 150% of current cpue levels.</p>
<p>It is straightforward to design an MP that will aim for this target index level by making adjustments to the TAC.</p>
<p>We will call this MP <code>TCPUE</code>, short for target catch per unit effort:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb489-1" title="1">TCPUE&lt;-<span class="cf">function</span>(x,Data,reps){</a>
<a class="sourceLine" id="cb489-2" title="2">  </a>
<a class="sourceLine" id="cb489-3" title="3">  mc&lt;-<span class="fl">0.05</span>                             <span class="co"># max change in TAC </span></a>
<a class="sourceLine" id="cb489-4" title="4">  frac&lt;-<span class="fl">0.3</span>                            <span class="co"># target index is 30% of max</span></a>
<a class="sourceLine" id="cb489-5" title="5">  nyears&lt;-<span class="kw">length</span>(Data<span class="op">@</span>Ind[x,])         <span class="co"># number of years of data</span></a>
<a class="sourceLine" id="cb489-6" title="6">  </a>
<a class="sourceLine" id="cb489-7" title="7">  smoothI&lt;-<span class="kw">smooth.spline</span>(Data<span class="op">@</span>Ind[x,]) <span class="co"># smoothed index  </span></a>
<a class="sourceLine" id="cb489-8" title="8">  targetI&lt;-<span class="kw">max</span>(smoothI<span class="op">$</span>y)<span class="op">*</span>frac         <span class="co"># target </span></a>
<a class="sourceLine" id="cb489-9" title="9">  </a>
<a class="sourceLine" id="cb489-10" title="10">  currentI&lt;-<span class="kw">mean</span>(Data<span class="op">@</span>Ind[x,(nyears<span class="dv">-2</span>)<span class="op">:</span>nyears]) <span class="co"># current index</span></a>
<a class="sourceLine" id="cb489-11" title="11">  </a>
<a class="sourceLine" id="cb489-12" title="12">  ratio&lt;-currentI<span class="op">/</span>targetI              <span class="co"># ratio currentI/targetI</span></a>
<a class="sourceLine" id="cb489-13" title="13">  </a>
<a class="sourceLine" id="cb489-14" title="14">  <span class="cf">if</span>(ratio <span class="op">&lt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc <span class="co"># if currentI &lt; targetI</span></a>
<a class="sourceLine" id="cb489-15" title="15">  <span class="cf">if</span>(ratio <span class="op">&gt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc <span class="co"># if currentI &gt; targetI</span></a>
<a class="sourceLine" id="cb489-16" title="16"> </a>
<a class="sourceLine" id="cb489-17" title="17">  Rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>)</a>
<a class="sourceLine" id="cb489-18" title="18">  Rec<span class="op">@</span>TAC &lt;-<span class="st">  </span>Data<span class="op">@</span>MPrec[x] <span class="op">*</span><span class="st"> </span>ratio <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>(<span class="kw">rnorm</span>(reps, <span class="op">-</span>Data<span class="op">@</span>CV_Ind[x]<span class="op">^</span><span class="dv">2</span><span class="op">/</span><span class="dv">2</span>, Data<span class="op">@</span>CV_Ind[x]))</a>
<a class="sourceLine" id="cb489-19" title="19">  Rec</a>
<a class="sourceLine" id="cb489-20" title="20">}</a></code></pre></div>
<p>The <code>TCPUE</code> function simply decreases the past TAC (stored in <code>Data@MPrec</code>) if the index is lower than the target and increases the TAC if the index is higher than the target.</p>
<p>All that is left is to make it compatible with DLMtool:</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb490-1" title="1"><span class="kw">class</span>(TCPUE)&lt;-<span class="st">&quot;MP&quot;</span></a>
<a class="sourceLine" id="cb490-2" title="2"><span class="kw">sfExport</span>(<span class="st">&quot;TCPUE&quot;</span>)</a></code></pre></div>
</div>
<div id="beyond-the-catch-limit" class="section level2">
<h2><span class="header-section-number">26.4</span> Beyond the Catch Limit</h2>
<p>All management procedures return an object of class ‘Rec’ that contains 13 slots:</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb491-1" title="1"><span class="kw">slotNames</span>(<span class="st">&quot;Rec&quot;</span>)</a></code></pre></div>
<pre><code>##  [1] &quot;TAC&quot;      &quot;Effort&quot;   &quot;Spatial&quot;  &quot;Allocate&quot; &quot;LR5&quot;      &quot;LFR&quot;     
##  [7] &quot;HS&quot;       &quot;Rmaxlen&quot;  &quot;L5&quot;       &quot;LFS&quot;      &quot;Vmaxlen&quot;  &quot;Fdisc&quot;   
## [13] &quot;Misc&quot;</code></pre>
<p>We’ve already seen the TAC slot in the previous exercise. The remaining slots relate to various forms of input control:</p>
<ul>
<li>Effort (total allowable effort (TAE) relative to last historical year)</li>
<li>Spatial - Fraction of each area that is open</li>
<li>Allocate - Allocation of effort from closed areas to open areas</li>
<li>LR5 - Length at 5% retention</li>
<li>LFR - Length at 100% retention</li>
<li>HS - Upper slot limit</li>
<li>Rmaxlen - Retention of the maximum length class</li>
<li>L5 - Length at 5% selection (e.g a change in gear type)</li>
<li>LFS - Length at 100% selection (e.g a change in gear type)</li>
<li>Vmaxlen - Selectivity of the maximum length class</li>
<li>Fdisc - Update the discard mortality if required</li>
<li>Misc - An optional slot for storing additional information</li>
</ul>
<p>The <code>curE</code> MP just keeps effort constant at current levels:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb493-1" title="1">curE</a></code></pre></div>
<pre><code>## function(x, Data, reps, plot=FALSE) {
##   # current effort
##   rec &lt;- new(&quot;Rec&quot;) # create recommendation object
##   rec@Effort &lt;- 1 #* Data@MPeff[x] 
##   if (plot) curE_plot(x, rec, Data)
##   rec
## }
## &lt;bytecode: 0x000001b0e83f6398&gt;
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>Note that only the <code>Effort</code> slot in the <code>Rec</code> object is populated in this case.</p>
<p>To highlight the differences among Input control MPs examine spatial control MP <code>MRreal</code> that closes area 1 to fishing and reallocates fishing to the open area 2:</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb495-1" title="1">MRreal</a></code></pre></div>
<pre><code>## function(x, Data, reps, plot=FALSE) {
##   # A Marine reserve in area 1 with spatial reallocation of effort
##   
##   rec &lt;- new(&quot;Rec&quot;) # create recommendation object
##   rec@Allocate &lt;- 1
##   rec@Spatial &lt;- c(0, rep(1, Data@nareas-1))
##   
##   if (plot)  barplot(rec@Spatial, xlab=&quot;Area&quot;, ylab=&quot;Fraction Open&quot;, ylim=c(0,1),
##                       names=1:Data@nareas)
##   return(rec)
## }
## &lt;bytecode: 0x000001b0e00c31f8&gt;
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>In contrast <code>MRnoreal</code> does not reallocate fishing effort:</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb497-1" title="1">MRnoreal</a></code></pre></div>
<pre><code>## function(x, Data, reps, plot=FALSE) {
##   # A Marine reserve in area 1 with no spatial reallocation of effort
##   
##   rec &lt;- new(&quot;Rec&quot;) # create recommendation object
##   rec@Allocate &lt;- 0
##   rec@Spatial &lt;- c(0, rep(1, Data@nareas-1))
##   
##   if (plot)   barplot(rec@Spatial, xlab=&quot;Area&quot;, ylab=&quot;Fraction Open&quot;, ylim=c(0,1),
##                       names=1:Data@nareas)
##   return(rec)
## }
## &lt;bytecode: 0x000001b0e0175538&gt;
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<p>The MP <code>matlenlim</code> only specifies the parameters of length retention using an estimate of length at 50% maturity (<code>Stock@L50</code>):</p>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb499-1" title="1">matlenlim</a></code></pre></div>
<pre><code>## function(x, Data, reps, plot=FALSE) {
##   # Knife-edge vulnerability at estimated length-at-maturity  
##   rec &lt;- new(&quot;Rec&quot;) # create recommendation object
##   rec@LFR &lt;- Data@L50[x] # new length at full retention   
##   rec@LR5  &lt;- rec@LFR * 0.95 # new length at 5% retention   
##   if(plot) size_lim_plot(x, Data, rec)
##   # other slots aren&#39;t specified so remain unchanged
##   rec
## }
## &lt;bytecode: 0x000001b0e0644350&gt;
## &lt;environment: namespace:DLMtool&gt;
## attr(,&quot;class&quot;)
## [1] &quot;MP&quot;</code></pre>
<div id="an-example-effort-control" class="section level3">
<h3><span class="header-section-number">26.4.1</span> An Example Effort Control</h3>
<p>Here we will copy and modify the MP we developed earlier to specify a new version of the target catch per unit effort MP (<code>TCPUE</code>) that provides effort recommendations:</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb501-1" title="1">TCPUE_e&lt;-<span class="cf">function</span>(x,Data,reps){</a>
<a class="sourceLine" id="cb501-2" title="2">  </a>
<a class="sourceLine" id="cb501-3" title="3">  mc&lt;-<span class="fl">0.05</span>                             <span class="co"># max change in TAC </span></a>
<a class="sourceLine" id="cb501-4" title="4">  frac&lt;-<span class="fl">0.3</span>                            <span class="co"># target index is 30% of max</span></a>
<a class="sourceLine" id="cb501-5" title="5">  nyears&lt;-<span class="kw">length</span>(Data<span class="op">@</span>Ind[x,])         <span class="co"># number of years of data</span></a>
<a class="sourceLine" id="cb501-6" title="6">  </a>
<a class="sourceLine" id="cb501-7" title="7">  smoothI&lt;-<span class="kw">smooth.spline</span>(Data<span class="op">@</span>Ind[x,]) <span class="co"># smoothed index  </span></a>
<a class="sourceLine" id="cb501-8" title="8">  targetI&lt;-<span class="kw">max</span>(smoothI<span class="op">$</span>y)<span class="op">*</span>frac         <span class="co"># target </span></a>
<a class="sourceLine" id="cb501-9" title="9">  </a>
<a class="sourceLine" id="cb501-10" title="10">  currentI&lt;-<span class="kw">mean</span>(Data<span class="op">@</span>Ind[x,(nyears<span class="dv">-2</span>)<span class="op">:</span>nyears]) <span class="co"># current index</span></a>
<a class="sourceLine" id="cb501-11" title="11">  </a>
<a class="sourceLine" id="cb501-12" title="12">  ratio&lt;-currentI<span class="op">/</span>targetI              <span class="co"># ratio currentI/targetI</span></a>
<a class="sourceLine" id="cb501-13" title="13">  </a>
<a class="sourceLine" id="cb501-14" title="14">  <span class="cf">if</span>(ratio <span class="op">&lt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">-</span><span class="st"> </span>mc <span class="co"># if currentI &lt; targetI</span></a>
<a class="sourceLine" id="cb501-15" title="15">  <span class="cf">if</span>(ratio <span class="op">&gt;</span><span class="st"> </span>(<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc)) ratio &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>mc <span class="co"># if currentI &gt; targetI</span></a>
<a class="sourceLine" id="cb501-16" title="16">  </a>
<a class="sourceLine" id="cb501-17" title="17">  rec &lt;-<span class="st"> </span><span class="kw">new</span>(<span class="st">&quot;Rec&quot;</span>)</a>
<a class="sourceLine" id="cb501-18" title="18">  rec<span class="op">@</span>Effort &lt;-<span class="st"> </span>Data<span class="op">@</span>MPeff[x] <span class="op">*</span><span class="st"> </span>ratio</a>
<a class="sourceLine" id="cb501-19" title="19">  rec</a>
<a class="sourceLine" id="cb501-20" title="20">  </a>
<a class="sourceLine" id="cb501-21" title="21">}</a></code></pre></div>
<p>There have been surprisingly few changes to make TCPUE an input control MP that sets total allowable effort.</p>
<ol style="list-style-type: decimal">
<li>We have had to use stored recommendations of effort in the <code>Data@MPeff</code> slot, and</li>
<li>The final line of the MP is our input control recommendatation that only modified the Effort.</li>
</ol>
<p>That is all.
Again, we need to assign our new function to class <code>MP</code> and export it to the cluster:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb502-1" title="1"><span class="kw">class</span>(TCPUE_e)&lt;-<span class="st">&quot;MP&quot;</span></a>
<a class="sourceLine" id="cb502-2" title="2"><span class="kw">sfExport</span>(<span class="st">&#39;TCPUE_e&#39;</span>)</a></code></pre></div>
<p>Let’s test the two MPs and see how they peform:</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb503-1" title="1">testMSE&lt;-<span class="kw">runMSE</span>(testOM,<span class="dt">MPs=</span><span class="kw">c</span>(<span class="st">&quot;TCPUE&quot;</span>,<span class="st">&quot;TCPUE_e&quot;</span>), <span class="dt">parallel =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Exporting custom MPs in global environment</code></pre>
<pre><code>## Running MSE in parallel on 8 processors</code></pre>
<pre><code>## MSE completed</code></pre>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb507-1" title="1"><span class="kw">NOAA_plot</span>(testMSE)</a></code></pre></div>
<p><img src="userguide_files/figure-html/unnamed-chunk-179-1.png" width="672" /></p>
<pre><code>##         PNOF  B50  LTY   VY
## TCPUE   48.1 57.2 45.0 70.8
## TCPUE_e 59.3 82.0 87.1  4.2</code></pre>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="customizing-the-operating-model.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="custom-parameters.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": null,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["userguide.pdf"],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"<!--edit": "https://github.com/DLMtool/DLMtool_UserGuide/edit/master/%s-->"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
